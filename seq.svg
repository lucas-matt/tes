<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="641px" preserveAspectRatio="none" style="width:623px;height:641px;" version="1.1" viewBox="0 0 623 641" width="623px" zoomAndPan="magnify"><defs><filter height="300%" id="fm60dqiochph2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fm60dqiochph2)" height="66.2656" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="309.5" y="189.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309.5" x2="309.5" y1="189.6953" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319.5" x2="319.5" y1="189.6953" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309.5" x2="319.5" y1="189.6953" y2="189.6953"/><rect fill="#FFFFFF" filter="url(#fm60dqiochph2)" height="101.3984" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="309.5" y="283.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309.5" x2="309.5" y1="283.9609" y2="385.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319.5" x2="319.5" y1="283.9609" y2="385.3594"/><rect fill="#FFFFFF" filter="url(#fm60dqiochph2)" height="131.5313" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="309.5" y="413.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309.5" x2="309.5" y1="413.3594" y2="544.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319.5" x2="319.5" y1="413.3594" y2="544.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="27" y1="86.2969" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="27" x2="27" y1="255.9609" y2="283.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="27" y1="283.9609" y2="385.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="27" x2="27" y1="385.3594" y2="413.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="27" y1="413.3594" y2="553.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="187" x2="187" y1="86.2969" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="187" x2="187" y1="255.9609" y2="283.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="187" x2="187" y1="283.9609" y2="385.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="187" x2="187" y1="385.3594" y2="413.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="187" x2="187" y1="413.3594" y2="553.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="314" y1="86.2969" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="314" x2="314" y1="255.9609" y2="283.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="314" y1="283.9609" y2="385.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="314" x2="314" y1="385.3594" y2="413.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="314" y1="413.3594" y2="553.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="418" x2="418" y1="86.2969" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="418" x2="418" y1="255.9609" y2="283.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="418" x2="418" y1="283.9609" y2="385.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="418" x2="418" y1="385.3594" y2="413.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="418" x2="418" y1="413.3594" y2="553.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="561" x2="561" y1="86.2969" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="561" x2="561" y1="255.9609" y2="283.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="561" x2="561" y1="283.9609" y2="385.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="561" x2="561" y1="385.3594" y2="413.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="561" x2="561" y1="413.3594" y2="553.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="82.9951">User</text><ellipse cx="27" cy="13" fill="#FEFECE" filter="url(#fm60dqiochph2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,21 L27,48 M14,29 L40,29 M27,48 L14,63 M27,48 L40,63 " fill="none" filter="url(#fm60dqiochph2)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="565.8857">User</text><ellipse cx="27" cy="579.1875" fill="#FEFECE" filter="url(#fm60dqiochph2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,587.1875 L27,614.1875 M14,595.1875 L40,595.1875 M27,614.1875 L14,629.1875 M27,614.1875 L40,629.1875 " fill="none" filter="url(#fm60dqiochph2)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fm60dqiochph2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="120" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="127" y="70.9951">MessageHandler</text><rect fill="#FEFECE" filter="url(#fm60dqiochph2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="130" x="120" y="552.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="127" y="572.8857">MessageHandler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="264" y="82.9951">SendRequest</text><path d="M296.5,34 C296.5,24 314.5,24 314.5,24 C314.5,24 332.5,24 332.5,34 L332.5,60 C332.5,70 314.5,70 314.5,70 C314.5,70 296.5,70 296.5,60 L296.5,34 " fill="#FEFECE" filter="url(#fm60dqiochph2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M296.5,34 C296.5,44 314.5,44 314.5,44 C314.5,44 332.5,44 332.5,34 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="264" y="565.8857">SendRequest</text><path d="M296.5,579.1875 C296.5,569.1875 314.5,569.1875 314.5,569.1875 C314.5,569.1875 332.5,569.1875 332.5,579.1875 L332.5,605.1875 C332.5,615.1875 314.5,615.1875 314.5,615.1875 C314.5,615.1875 296.5,615.1875 296.5,605.1875 L296.5,579.1875 " fill="#FEFECE" filter="url(#fm60dqiochph2)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M296.5,579.1875 C296.5,589.1875 314.5,589.1875 314.5,589.1875 C314.5,589.1875 332.5,589.1875 332.5,579.1875 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><path d="M380,60 L456,60 C461,60 461,73.1484 461,73.1484 C461,73.1484 461,86.2969 456,86.2969 L380,86.2969 C375,86.2969 375,73.1484 375,73.1484 C375,73.1484 375,60 380,60 " fill="#FEFECE" filter="url(#fm60dqiochph2)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M456,60 C451,60 451,73.1484 451,73.1484 C451,86.2969 456,86.2969 456,86.2969 " fill="none" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="380" y="77.9951">EventBus</text><path d="M380,552.8906 L456,552.8906 C461,552.8906 461,566.0391 461,566.0391 C461,566.0391 461,579.1875 456,579.1875 L380,579.1875 C375,579.1875 375,566.0391 375,566.0391 C375,566.0391 375,552.8906 380,552.8906 " fill="#FEFECE" filter="url(#fm60dqiochph2)" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M456,552.8906 C451,552.8906 451,566.0391 451,566.0391 C451,579.1875 456,579.1875 456,579.1875 " fill="none" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="380" y="570.8857">EventBus</text><rect fill="#FEFECE" filter="url(#fm60dqiochph2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="516" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="523" y="70.9951">EmailActor</text><rect fill="#FEFECE" filter="url(#fm60dqiochph2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="516" y="552.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="523" y="572.8857">EmailActor</text><rect fill="#FFFFFF" filter="url(#fm60dqiochph2)" height="66.2656" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="309.5" y="189.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309.5" x2="309.5" y1="189.6953" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319.5" x2="319.5" y1="189.6953" y2="255.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309.5" x2="319.5" y1="189.6953" y2="189.6953"/><rect fill="#FFFFFF" filter="url(#fm60dqiochph2)" height="101.3984" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="309.5" y="283.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309.5" x2="309.5" y1="283.9609" y2="385.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319.5" x2="319.5" y1="283.9609" y2="385.3594"/><rect fill="#FFFFFF" filter="url(#fm60dqiochph2)" height="131.5313" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="309.5" y="413.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309.5" x2="309.5" y1="413.3594" y2="544.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319.5" x2="319.5" y1="413.3594" y2="544.8906"/><rect fill="#EEEEEE" filter="url(#fm60dqiochph2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="608" x="3" y="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="611" y1="116.8633" y2="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="611" y1="119.8633" y2="119.8633"/><rect fill="#EEEEEE" filter="url(#fm60dqiochph2)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="127" x="243.5" y="106.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="249.5" y="122.3638">send message</text><polygon fill="#A80036" points="175,156.5625,185,160.5625,175,164.5625,179,160.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="181" y1="160.5625" y2="160.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="34" y="155.4966">POST /messages</text><polygon fill="#A80036" points="297.5,185.6953,307.5,189.6953,297.5,193.6953,301.5,189.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="187" x2="303.5" y1="189.6953" y2="189.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="194" y="184.6294">save</text><polygon fill="#A80036" points="406,214.8281,416,218.8281,406,222.8281,410,218.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="187" x2="412" y1="218.8281" y2="218.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="194" y="213.7622">message queued</text><polygon fill="#A80036" points="38,243.9609,28,247.9609,38,251.9609,34,247.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="186" y1="247.9609" y2="247.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="44" y="242.895">202 Accepted</text><rect fill="#EEEEEE" filter="url(#fm60dqiochph2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="608" x="3" y="304.5273"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="611" y1="304.5273" y2="304.5273"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="611" y1="307.5273" y2="307.5273"/><rect fill="#EEEEEE" filter="url(#fm60dqiochph2)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="172" x="221" y="293.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="227" y="310.0278">message processing</text><polygon fill="#A80036" points="549,344.2266,559,348.2266,549,352.2266,553,348.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="418" x2="555" y1="348.2266" y2="348.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="425" y="343.1606">dequeue message</text><polygon fill="#A80036" points="330.5,373.3594,320.5,377.3594,330.5,381.3594,326.5,377.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324.5" x2="560" y1="377.3594" y2="377.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="336.5" y="372.2935">update</text><rect fill="#EEEEEE" filter="url(#fm60dqiochph2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="608" x="3" y="433.9258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="611" y1="433.9258" y2="433.9258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="611" y1="436.9258" y2="436.9258"/><rect fill="#EEEEEE" filter="url(#fm60dqiochph2)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="104" x="255" y="423.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="261" y="439.4263">read status</text><polygon fill="#A80036" points="175,473.625,185,477.625,175,481.625,179,477.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="181" y1="477.625" y2="477.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="34" y="472.5591">GET /messages/&lt;id&gt;</text><polygon fill="#A80036" points="198,502.7578,188,506.7578,198,510.7578,194,506.7578" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="297.5,502.7578,307.5,506.7578,297.5,510.7578,301.5,506.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="192" x2="303.5" y1="506.7578" y2="506.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="204" y="501.6919">read</text><polygon fill="#A80036" points="38,531.8906,28,535.8906,38,539.8906,34,535.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="32" x2="186" y1="535.8906" y2="535.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="44" y="530.8247">200 OK</text><!--
@startuml
actor User

== send message ==

User -> MessageHandler: POST /messages
database SendRequest
MessageHandler -> SendRequest: save

activate SendRequest
queue EventBus
MessageHandler -> EventBus: message queued
MessageHandler -> User: 202 Accepted
...

== message processing ==

EventBus -> EmailActor: dequeue message
EmailActor -> SendRequest: update
...

== read status ==

User -> MessageHandler: GET /messages/<id>
MessageHandler <-> SendRequest: read
MessageHandler -> User: 200 OK
@enduml

PlantUML version 1.2019.04(Fri Mar 29 15:44:36 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_201-heroku-b09
Operating System: Linux
OS Version: 4.4.0-1046-aws
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>